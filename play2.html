<!DOCTYPE html>

<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://kit.fontawesome.com/2b42ec6388.js" crossorigin="anonymous"></script>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8">
  <title>REV TORQUE CAR GAME</title>
</head>
<body>
  
  
  <style>
  
  *{
    margin: 0;
    padding: 0;
    box-size: border-box;
  }
  
  body{
    height: 100%;
    width: 100%;
  }
  
  #road{
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: absolute;
    z-index: 0;
    animation: roadLoop 5s linear infinite;
  }
  
  @keyframes roadLoop{
    0%{
      top: -100%;
    }
    100%{
      top: 0;
    }
  }
 
  #road2{
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: absolute;
    z-index: 0;
    animation: roadLoop2 5s linear infinite;
  }
  
  @keyframes roadLoop2{
    0%{
      top: 0;
    }
    100%{
      top: 100%;
    }
  }
  
  .back2{
    color: black;
    background-color: red;
    font-weight: bold;
    font-size: 20px;
    margin-left: 8px;
    margin-top: 5px;
    height: 33px;
    width: 58px;
    border: 2px solid orange;
    border-radius: 10px;
    opacity: 0;

  animation: slideup 0.8s ease-out forwards;
}

@keyframes slideup {
  to {
    transform: translateX(0);
    opacity: 1;
  }
  }
  
  #start{
    height: 50px;
    width: 150px;
    margin-top: 240px;
    margin-left: 41px;
    position: absolute;
    background-color: #FBBF24;
    color: #FDE68A;
    font-weight: bold;
    font-size: 28px;
    border: 3px solid black;
    border-radius: 15px;
    transition: transform 0.2s ease;
  }
  
  #start:hover{
    transform: scale(1.1);
  }
  
  #f1{
    height: 95px;
    width: 95px;
    position: absolute;
    margin-top: 120%;
    margin-left: 70px;
  }
  
  #car1{
    height: 80px;
    width: 80px;
    position: absolute;
    margin-top: 20%;
    margin-left: 20px;
    transform: translateY(-30vh);
    animation: car1 3s linear infinite;
  }
  
  @keyframes car1{
    to {
      transform: translateY(100vh);
    }
  }
  
  #car2{
    height: 90px;
    width: 85px;
    position: absolute;
    margin-top: 20%;
    margin-left: 75px;
    transform: translateY(-30vh);
    animation: car2 5s linear infinite;
  }

  @keyframes car2{
    to {
      transform: translateY(100vh);
    }
  }
  
  #car3{
    height: 90px;
    width: 90px;
    position: absolute;
    margin-top: 20%;
    margin-left: 130px;
    transform: translateY(-60vh);
    animation: car2 4s linear infinite;
  }

  @keyframes car2{
    to {
      transform: translateY(100vh);
    }
  }
  
  #score{
    position: absolute;
    right: 5px;
    top: 5px; 
    background: #fff2;
    color: #fff;
    font-weight: 700;
    padding: 5px 20px;
    border-radius: 8px;
    z-index: 10;
    box-shadow: 0 2px 8px #0008;
  }
  
  #right{
    position: absolute;
    right: 20px;
    top: 80%;
    height: 65px;
    width: 65px;
    background: #fff2;
    border: none;
    color: #E5E7EB;
    font-size: 30px;
    border-radius: 50%;
    box-shadow: 0 0 3px black;
    transition: transform 0.2s ease;
  }
  
  #right:hover{
    color: #BCC4D0;
    transform: scale(1.1);
  }
  
  #left{
    position: absolute;
    left: 20px;
    top: 80%;
    height: 65px;
    width: 65px;
    background: #fff2;
    border: none;
    color: #E5E7EB;
    font-size: 30px;
    border-radius: 50%;
    box-shadow: 0 0 3px black;
    transition: transform 0.2s ease;
  }
  
  #left:hover{
    color: #BCC4D0;
    transform: scale(1.1);
  }
  
  #gameover{
    height: 140px;
    width: 190px;
    background-color: #EF4444;
    border: 3px solid black;
    border-radius: 20px;
    text-align: center;
    position: absolute;
    margin-top: 40%;
    margin-left: 80px;
  }
  
  p1{
    font-size: 23px;
    font-weight: bold;
    position: absolute;
    top: 50px;
    left: 17px;
  }
  
  #try{
    position: absolute;
    height: 40px;
    width: 145px;
    right: 23px;
    top: 80px;
    border-radius: 8px;
    border: 3px solid black;
    background: #22C55E;
    color: #FBBF24;
    font-size: 20px;
    font-weight: bold;
    box-shadow: 0 0 1px black inset;
  }
  
  #try:hover{
    cursor: pointer;
  }
  
  #obstacle1{
    background-color: none;
    position: absolute;
    height: 588px;
    width: 50px;
    margin-top: -38px;
    margin-left: 48px;
  }
  
  #obstacle2{
    background-color: none;
    position: absolute;
    height: 550px;
    width: 50px;
    margin-top: px;
    margin-left: 266px;
  }
  
  </style>
  
  
  <img id="road" src="road.jpg">
  <img id="road2" src="road.jpg">
  <div id="obstacle1"></div>
  <div id="obstacle2"></div>
  <a href="play.html"> <button class="back2"><i class="fa-solid fa-arrow-left-long"></i></button></a>
  <button id="start">START</button>
  <img id="f1" src="lambo.png">
  <img id="car1" src="car1.png">
  <img id="car2" src="car2.png">
  <img id="car3" src="car3.png">
  <div id="score">SCORE - 0</div>
  <button id="right"><i class="fa-solid fa-right-long"></i></button>
  <button id="left"><i class="fa-solid fa-left-long"></i></button>
    
    <div id="gameover">
      <p1>GAME OVER</p1>
      <button id="try">PLAY AGAIN</button>
    </div>
  

  <script>
  
  const startBtn = document.getElementById('start');
  const tryBtn = document.getElementById('try');
  const f1 = document.getElementById('f1');
  const gameOverDiv = document.getElementById('gameover');
  const scoreDisplay = document.getElementById('score');
  const leftBtn = document.getElementById('left');
  const rightBtn = document.getElementById('right');
  const road = document.getElementById('road');
  const road2 = document.getElementById('road2');

  const obstacles = [
  document.getElementById('obstacle1'),
  document.getElementById('obstacle2')
  ];

  const enemyCars = [
  document.getElementById('car1'),
  document.getElementById('car2'),
  document.getElementById('car3')
  ];

  let gameInterval;
  let score = 0;
  let isGameRunning = false;

  let f1Left = 70; // initial left position in px

  function startGame() {
    score = 0;
    updateScore();
    gameOverDiv.style.display = 'none';
    f1.style.marginLeft = `${f1Left}px`;

    // Enable animations
    road.style.animationPlayState = 'running';
    road2.style.animationPlayState = 'running';
    enemyCars.forEach(car => car.style.animationPlayState = 'running');

    // Start score checking loop
    gameInterval = setInterval(() => {
      enemyCars.forEach(car => {
        if (isColliding(f1, car)) {
          stopGame();
        } else if (parseInt(car.getBoundingClientRect().top) > window.innerHeight) {
          // Car passed without collision, increase score
          resetCar(car); // reposition car
          score++;
          updateScore();
        }
      });
      
obstacles.forEach(obs => {
  if (isColliding(f1, obs)) {
    stopGame();
  }
});
      
    }, 50);

    isGameRunning = true;
  }

  function stopGame() {
  clearInterval(gameInterval);
  gameOverDiv.innerHTML = `
    <div style="font-size: 28px; font-weight: bold; color: #FCD34D;">GAME OVER</div>
    <div style="margin: 10px 0; font-size: 22px; color: #34D399;">Your Score - ${score}</div>
    <button id="try" style="background-color: #4ADE80; color: black; font-weight: bold; font-size: 18px; padding: 10px 20px; border: none; border-radius: 10px;">PLAY AGAIN</button>
  `;
  gameOverDiv.style.display = 'block';

  // Pause all animations
  road.style.animationPlayState = 'paused';
  road2.style.animationPlayState = 'paused';
  enemyCars.forEach(car => car.style.animationPlayState = 'paused');
  isGameRunning = false;

  // Reattach TRY AGAIN listener
  document.getElementById('try').addEventListener('click', resetGame);
}

  function resetGame() {
    location.reload(); // Simple and full reset
  }

  function updateScore() {
    scoreDisplay.innerText = `SCORE - ${score}`;
  }

  function isColliding(a, b) {
  const rect1 = a.getBoundingClientRect();
  const rect2 = b.getBoundingClientRect();

  const buffer = 20; // ðŸ‘ˆ Yeh value badha/ghata ke testing kar sakta hai

  return !(
    rect1.bottom - buffer < rect2.top + buffer ||
    rect1.top + buffer > rect2.bottom - buffer ||
    rect1.right - buffer < rect2.left + buffer ||
    rect1.left + buffer > rect2.right - buffer
  );
}

  function resetCar(car) {
    // Reset animation (quick trick by reapplying style)
    car.style.animation = 'none';
    car.offsetHeight; // trigger reflow
    car.style.animation = car.id === 'car1' ? 'car1 4s linear infinite'
                      : car.id === 'car2' ? 'car2 5s linear infinite'
                      : car.id === 'car3' ? 'car2 6.5s linear infinite'
                      : 'car2 4s linear infinite';
  }

  startBtn.addEventListener('click', () => {
    startBtn.style.display = 'none';
    startGame();
  });

  tryBtn.addEventListener('click', () => {
    resetGame();
  });

  rightBtn.addEventListener('click', () => {
    if (!isGameRunning) return;
    if (f1Left < (window.innerWidth - 100)) {
      f1Left += 55;
      f1.style.marginLeft = `${f1Left}px`;
    }
  });

  leftBtn.addEventListener('click', () => {
    if (!isGameRunning) return;
    if (f1Left > 0) {
      f1Left -= 55;
      f1.style.marginLeft = `${f1Left}px`;
    }
  });

  // Initially pause all animations
  window.onload = () => {
    road.style.animationPlayState = 'paused';
    road2.style.animationPlayState = 'paused';
    enemyCars.forEach(car => car.style.animationPlayState = 'paused');
    gameOverDiv.style.display = 'none';
  };
</script>
  
  
</body>
</html>
